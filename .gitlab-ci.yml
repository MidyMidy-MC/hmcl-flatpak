include:
  - https://gitlab.com/accessable-net/gitlab-ci-templates/raw/master/flatpak.yml

variables:
  APP_ID: org.jackhuang.hmcl
  FLATPAK_MODULE: HMCL
  RUNTIME_VRESION: "21.08"
  MANIFEST_PATH: $CI_PROJECT_DIR/${APP_ID}.yml

flatpak:
  before_script:
    # Add dependent sdk
    - flatpak remote-add --user --if-not-exists flathub ${RUNTIME_REPO}
    - flatpak install --user --noninteractive
      org.freedesktop.Platform//${RUNTIME_VRESION}
      org.freedesktop.Sdk//${RUNTIME_VRESION}
      org.freedesktop.Sdk.Extension.openjdk17//${RUNTIME_VRESION}
      org.freedesktop.Sdk.Extension.openjdk8//${RUNTIME_VRESION}
